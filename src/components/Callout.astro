---
export interface Props {
  variant?: 'info' | 'warn' | 'tip';
  title?: string;
}

const { variant = 'info', title } = Astro.props;

const styles = {
  info: {
    border: 'var(--info-border)',
    bg: 'var(--info-bg)',
    color: 'var(--info)',
    icon: 'â„¹',
  },
  warn: {
    border: 'var(--warn-border)',
    bg: 'var(--warn-bg)',
    color: 'var(--warn)',
    icon: 'âš ',
  },
  tip: {
    border: 'var(--tip-border)',
    bg: 'var(--tip-bg)',
    color: 'var(--tip)',
    icon: 'ðŸ’¡',
  },
};

const style = styles[variant];
---

<div
  class="callout"
  style={`
    border-left: 4px solid ${style.border};
    background-color: ${style.bg};
    border-color: ${style.border};
  `}
>
  <div class="callout-header">
    <span class="callout-icon" style={`color: ${style.color}`}>{style.icon}</span>
    {title && <span class="callout-title" style={`color: ${style.color}`}>{title}</span>}
  </div>
  <div class="callout-content">
    <slot />
  </div>
</div>

<style>
  .callout {
    padding: 1.25rem 1.5rem;
    border-radius: 0.5rem;
    border: 1px solid;
    margin: 2em 0;
  }

  .callout-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
    font-weight: 600;
    font-size: 1rem;
  }

  .callout-icon {
    font-size: 1.25rem;
    line-height: 1;
  }

  .callout-title {
    font-size: 1rem;
    font-weight: 600;
    letter-spacing: -0.01em;
  }

  .callout-content {
    color: var(--text);
  }

  .callout-content :global(p) {
    margin-bottom: 0.75em;
  }

  .callout-content :global(p:last-child) {
    margin-bottom: 0;
  }

  .callout-content :global(ul),
  .callout-content :global(ol) {
    margin-top: 0.75em;
    margin-bottom: 0.75em;
  }

  .callout-content :global(li) {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
    line-height: 1.6;
  }

  .callout-content :global(li > p) {
    margin-top: 0.25em;
    margin-bottom: 0.25em;
  }

  .callout-content :global(strong) {
    font-weight: 600;
    color: var(--text);
  }

  .callout-content :global(code) {
    font-size: 0.875em;
  }

  @media (max-width: 640px) {
    .callout {
      padding: 1rem 1.25rem;
      margin: 1.5em 0;
    }

    .callout-header {
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .callout-icon {
      font-size: 1.125rem;
    }

    .callout-title {
      font-size: 0.9375rem;
    }
  }
</style>
