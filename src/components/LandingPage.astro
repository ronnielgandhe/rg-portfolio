---
export const prerender = false;
import { getImage } from 'astro:assets';
import AppLayout from '../layouts/AppLayout';
import { getRecentBlogPosts } from '../utils/blog';
import { getRandomBackgroundKey, getOptimizedBackgrounds } from '../utils/backgrounds';

// Get optimized backgrounds
const backgroundMap = await getOptimizedBackgrounds(getImage);

// Fetch recent blog posts for navigation
const recentPosts = await getRecentBlogPosts();
---

<AppLayout
  client:load
  initialBg={getRandomBackgroundKey()}
  backgroundMap={backgroundMap}
  recentPosts={recentPosts}
/>
