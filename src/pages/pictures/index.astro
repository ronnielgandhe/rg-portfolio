---
export const prerender = false;
import { getImage } from 'astro:assets';
import Layout from '../../layouts/Layout.astro';
import PicturesLayout from '../../layouts/PicturesLayout';
import { getRecentBlogPosts } from '../../utils/blog';
import { getFixedBackgroundKey, getOptimizedBackgrounds } from '../../utils/backgrounds';
import { photos } from '../../data/photos';

// Get optimized backgrounds
const backgroundMap = await getOptimizedBackgrounds(getImage);

// Fetch recent blog posts for navigation
const recentPosts = await getRecentBlogPosts();
---

<Layout
  title='Pictures - Ronniel Gandhe'
  description='Photo gallery showcasing life, work, and travel moments'
  canonical='https://ronnielgandhe.com/pictures'
>
  <PicturesLayout
    client:load
    photos={photos}
    initialBg={getFixedBackgroundKey()}
    backgroundMap={backgroundMap}
    recentPosts={recentPosts}
  />
</Layout>