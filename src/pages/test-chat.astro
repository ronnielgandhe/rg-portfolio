---
// Test page for the chat API
---

<html>
<head>
  <title>Test Chat API</title>
  <style>
    body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
    button { background: #0066cc; color: white; padding: 10px 20px; border: none; cursor: pointer; }
    textarea { width: 100%; height: 100px; background: #333; color: #fff; border: 1px solid #555; padding: 10px; }
    #response { background: #222; padding: 15px; margin-top: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>Chat API Test</h1>
  <p>Test your OpenAI API integration</p>
  
  <div>
    <label>Message:</label><br>
    <textarea id="message" placeholder="Type your message here...">Hello, can you respond with just the word TEST?</textarea>
  </div>
  
  <button onclick="testAPI()">Send Message</button>
  
  <div id="response"></div>

  <script>
    async function testAPI() {
      const message = document.getElementById('message').value;
      const responseDiv = document.getElementById('response');
      
      responseDiv.innerHTML = 'Sending request...';
      
      try {
        const response = await fetch('/api/chat', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            messages: [
              { role: 'user', content: message }
            ]
          })
        });
        
        const data = await response.json();
        
        if (response.ok) {
          responseDiv.innerHTML = `<strong>Success!</strong><br><pre>${JSON.stringify(data, null, 2)}</pre>`;
        } else {
          responseDiv.innerHTML = `<strong>Error ${response.status}:</strong><br><pre>${JSON.stringify(data, null, 2)}</pre>`;
        }
      } catch (error) {
        responseDiv.innerHTML = `<strong>Network Error:</strong><br><pre>${error.message}</pre>`;
      }
    }
  </script>
</body>
</html>